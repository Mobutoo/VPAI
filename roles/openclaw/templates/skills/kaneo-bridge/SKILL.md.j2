---
name: kaneo-bridge
description: "Hermes (messenger) â€” pont API Kaneo via curl. CHARGER EN PREMIER pour toute commande Kaneo: create_project, create_task, update_status, add_comment, add_label, assign_task, set_priority, set_due_date, get_tasks, get_projects. Contient auth Redis + commandes curl exactes."
metadata: { "openclaw": { "emoji": "ðŸ”—", "always": false } }
---

# Skill: Kaneo API Bridge (Hermes)

Tu traduis des commandes en appels `curl` vers l'API Kaneo.
**UNIQUEMENT `exec`.** JAMAIS d'Ã©criture de fichier.

## Auth (obligatoire avant tout appel)

```bash
COOKIE=$(redis-cli -h redis GET kaneo:session:cookie)
if [ -z "$COOKIE" ]; then
  curl -sf -D /tmp/kh.txt -o /tmp/kb.txt \
    -X POST http://kaneo-api:1337/api/auth/sign-in/email \
    -H 'Content-Type: application/json' \
    -d '{"email":"'"$KANEO_AGENT_EMAIL"'","password":"'"$KANEO_AGENT_PASSWORD"'"}'
  COOKIE=$(grep -i 'set-cookie:' /tmp/kh.txt | head -1 | sed 's/[Ss]et-[Cc]ookie: //;s/;.*//')
  redis-cli -h redis SETEX kaneo:session:cookie 2400 "$COOKIE"
fi
```

Si HTTP 401 : `redis-cli -h redis DEL kaneo:session:cookie` â†’ refaire auth â†’ retenter 1 fois.

## Commandes â†’ curl

Base URL : `http://kaneo-api:1337`
Headers : `-H "Content-Type: application/json" -H "Cookie: $COOKIE"`
workspaceId : `{{ kaneo_workspace_id }}`

### create_project name=X description=Y
```bash
curl -s -X POST http://kaneo-api:1337/api/project \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"name":"<X>","description":"<Y>","icon":"clipboard","slug":"<x-en-kebab-case>","workspaceId":"{{ kaneo_workspace_id }}"}'
# Retourne: {"id":"<project_id>",...}
```

### create_task projectId=P title=T description=D [status=S] [priority=P]
```bash
curl -s -X POST http://kaneo-api:1337/api/task/<P> \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"title":"<T>","description":"<D>","status":"to-do","priority":"medium"}'
# Retourne: {"id":"<task_id>",...}
# Statuts valides: to-do | in-progress | in-review | done
```

### update_status taskId=T status=S
```bash
curl -s -X PUT http://kaneo-api:1337/api/task/status/<T> \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"status":"<S>"}'
```

### add_comment taskId=T comment=C
```bash
curl -s -X POST http://kaneo-api:1337/api/activity/comment \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"taskId":"<T>","comment":"<C>"}'
```

### add_label taskId=T name=N color=#XXXXXX
```bash
curl -s -X POST http://kaneo-api:1337/api/label \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"taskId":"<T>","name":"<N>","color":"<#XXXXXX>","workspaceId":"{{ kaneo_workspace_id }}"}'
```

### assign_task taskId=T userId=U
```bash
curl -s -X PUT http://kaneo-api:1337/api/task/assignee/<T> \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"userId":"<U>"}'
```

### set_priority taskId=T priority=P
```bash
curl -s -X PUT http://kaneo-api:1337/api/task/priority/<T> \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"priority":"<P>"}'
# PrioritÃ©s: no-priority | low | medium | high | urgent
```

### set_due_date taskId=T dueDate=D
```bash
curl -s -X PUT http://kaneo-api:1337/api/task/due-date/<T> \
  -H "Content-Type: application/json" -H "Cookie: $COOKIE" \
  -d '{"dueDate":"<D>"}'
# Format ISO8601: 2026-03-15T00:00:00.000Z
```

### get_tasks projectId=P
```bash
curl -s http://kaneo-api:1337/api/task/tasks/<P> \
  -H "Cookie: $COOKIE"
```

### get_projects
```bash
curl -s "http://kaneo-api:1337/api/project?workspaceId={{ kaneo_workspace_id }}" \
  -H "Cookie: $COOKIE"
```

## Format de rÃ©ponse

Retourner TOUJOURS :
1. Le JSON brut de l'API
2. L'ID de l'entitÃ© en clair : `project_id: <id>` ou `task_id: <id>`

## RÃ¨gles absolues

- UNIQUEMENT `exec` pour lancer des commandes
- JAMAIS d'Ã©criture de fichier (pas de write, pas de mkdir, pas de save)
- JAMAIS d'URL autre que `http://kaneo-api:1337/api/*` ou `redis-cli -h redis`
- Retourner le JSON brut â€” ne pas inventer de donnÃ©es
