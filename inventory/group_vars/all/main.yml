---
# inventory/group_vars/all/main.yml — Variables generales (wizard)
# Genere par scripts/wizard.sh le 2026-02-15 20:18
# Source unique de verite — Remplir avant tout deploiement

# --- Identite projet ---
project_name: "javisi"
project_display_name: "Javisi"
project_description: "Stack AI/automatisation auto-hebergee"
project_repo_url: "git@github.com:Mobutoo/VPAI.git"
project_repo_branch: "main"

# --- Domaine & DNS ---
domain_name: "{{ vault_domain_name | default('example.com') }}"
domain_registrar: "ovh"
dns_api_endpoint: "ovh-eu"
admin_subdomain: "javisi"
n8n_subdomain: "mayi"
subdomain_preprod: "preprod"

# --- VPN Access Control ---
# Set to false to make admin UIs publicly accessible (for initial validation)
# Set to true to enforce VPN-only access (production hardening)
caddy_vpn_enforce: false

# --- VPS Production ---
prod_provider: "ovh"
prod_hostname: "{{ vault_prod_hostname | default('vps-prod-01') }}"
prod_ip: "{{ vault_prod_ip | default('127.0.0.1') }}"
prod_os: "debian-13"
prod_ram_gb: 8
prod_cpu_cores: 4
prod_disk_gb: 75
prod_ssh_port: 804
prod_user: "mobuone"

# --- VPS VPN (existant) ---
vpn_provider: "ionos"
vpn_hostname: "{{ vault_vpn_hostname | default('seko-vpn') }}"
vpn_headscale_url: "{{ vault_vpn_headscale_url | default('https://vpn.example.com') }}"
vpn_headscale_ip: "{{ vault_vpn_headscale_ip | default('127.0.0.1') }}"
vpn_network_cidr: "100.64.0.0/10"

# --- Pre-production (Hetzner Cloud) ---
preprod_provider: "hetzner"
preprod_server_type: "cx23"
preprod_location: "fsn1"
preprod_os_image: "debian-13"

# --- Stockage S3 (Hetzner Object Storage) ---
s3_provider: "hetzner"
s3_region: "fsn1"
s3_endpoint: "fsn1.your-objectstorage.com"
s3_bucket_backups: "{{ vault_s3_bucket_backups | default('vpai-backups') }}"
s3_bucket_shared: "{{ vault_s3_bucket_shared | default('vpai-shared') }}"

# --- Backup GFS Retention (Grandfather-Father-Son) ---
backup_gfs_keep_daily: 7
backup_gfs_keep_weekly: 4
backup_gfs_keep_monthly: 6
backup_gfs_keep_yearly: 2

# --- Notifications ---
notification_method: "telegram"
notification_email: "{{ vault_notification_email | default('') }}"

# Telegram monitoring bot (shared with Seko-VPN)
telegram_monitoring_bot_token: "{{ vault_telegram_monitoring_bot_token | default('') }}"
telegram_monitoring_chat_id: "{{ vault_telegram_monitoring_chat_id | default('') }}"

# Telegram OpenClaw bot (dedicated)
telegram_openclaw_bot_token: "{{ vault_telegram_openclaw_bot_token | default('') }}"
telegram_openclaw_chat_id: "{{ vault_telegram_openclaw_chat_id | default('') }}"

# Webhook URL kept for Discord/Slack backward compatibility
notification_webhook_url: "{{ vault_notification_webhook_url | default('') }}"

# --- Timezone ---
timezone: "Europe/Paris"
locale: "fr_FR.UTF-8"

# --- Environment ---
target_env: "prod"

# --- Services Passwords & Keys (from vault) ---
# PostgreSQL (shared password for all databases)
postgresql_password: "{{ vault_postgresql_password }}"

# Redis
redis_password: "{{ vault_redis_password }}"

# n8n
n8n_encryption_key: "{{ vault_n8n_encryption_key }}"
n8n_owner_password: "{{ vault_n8n_owner_password | default('') }}"

# LiteLLM
litellm_master_key: "{{ vault_litellm_master_key }}"
litellm_ui_username: "{{ vault_litellm_ui_username | default('admin') }}"
litellm_ui_password: "{{ vault_litellm_ui_password | default('') }}"
litellm_salt_key: "{{ vault_litellm_salt_key }}"

# AI Provider API Keys
anthropic_api_key: "{{ vault_anthropic_api_key }}"
openai_api_key: "{{ vault_openai_api_key }}"

# OpenClaw
openclaw_api_key: "{{ vault_openclaw_api_key }}"
# Gateway token for OpenClaw Control UI auth (generate: openssl rand -hex 32)
openclaw_gateway_token: "{{ vault_openclaw_gateway_token | default(vault_openclaw_api_key) }}"

# Grafana
grafana_admin_user: "{{ vault_grafana_admin_user | default('admin') }}"
grafana_admin_password: "{{ vault_grafana_admin_password }}"

# Qdrant
qdrant_api_key: "{{ vault_qdrant_api_key }}"

# Backup heartbeat (uptime monitoring)
backup_heartbeat_url: "{{ vault_backup_heartbeat_url | default('') }}"
