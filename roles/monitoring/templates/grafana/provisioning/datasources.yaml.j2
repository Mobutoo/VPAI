# {{ ansible_managed }}
# Grafana datasources provisioning for {{ project_display_name }}

apiVersion: 1

datasources:
  - name: VictoriaMetrics
    uid: VictoriaMetrics
    type: prometheus
    access: proxy
    url: http://victoriametrics:8428
    isDefault: true
    editable: false
    jsonData:
      httpMethod: POST
      timeInterval: "30s"

  - name: Loki
    uid: Loki
    type: loki
    access: proxy
    url: http://loki:3100
    editable: false
    jsonData:
      maxLines: 1000

  # PostgreSQL â€” AI model scoring data (model_scores table in n8n database)
  - name: PostgreSQL-n8n
    uid: PostgreSQL-n8n
    type: postgres
    access: proxy
    url: postgresql:5432
    editable: false
    jsonData:
      database: "n8n"
      sslmode: "disable"
      maxOpenConns: 5
      maxIdleConns: 2
      connMaxLifetime: 14400
      postgresVersion: 1800
      timescaledb: false
    secureJsonData:
      user: "n8n"
      password: "{{ postgresql_password }}"
