<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VPAI — Self-Hosted AI Infrastructure</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');

    :root {
      --bg: #0f172a;
      --surface: #1e293b;
      --surface-hover: #334155;
      --border: #334155;
      --text: #e2e8f0;
      --text-muted: #94a3b8;
      --accent: #3b82f6;
      --accent-light: #60a5fa;
      --green: #22c55e;
      --purple: #a78bfa;
      --orange: #fb923c;
      --red: #f87171;
      --cyan: #22d3ee;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 80px 40px 60px;
      background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
      border-bottom: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(ellipse at center, rgba(59,130,246,0.08) 0%, transparent 70%);
    }
    .hero h1 {
      font-size: 3.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 16px;
      position: relative;
    }
    .hero h1 span { color: var(--accent-light); }
    .hero .tagline {
      font-size: 1.25rem;
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto 32px;
      position: relative;
    }
    .hero .badges {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      position: relative;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-muted);
    }
    .badge .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      display: inline-block;
    }
    .badge .dot.green { background: var(--green); }
    .badge .dot.blue { background: var(--accent); }
    .badge .dot.purple { background: var(--purple); }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 40px;
    }

    /* Section */
    section {
      padding: 60px 0;
      border-bottom: 1px solid var(--border);
    }
    section:last-child { border-bottom: none; }

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 32px;
      letter-spacing: -0.02em;
    }
    h2 .number {
      color: var(--accent);
      font-weight: 800;
      margin-right: 8px;
    }
    h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--text);
    }

    /* Architecture Diagram */
    .arch-diagram {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 40px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      line-height: 1.8;
      overflow-x: auto;
    }
    .arch-diagram .network-label {
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: 4px 10px;
      border-radius: 6px;
      display: inline-block;
      margin-bottom: 8px;
    }
    .arch-diagram .net-backend { background: #1e3a5f; color: #60a5fa; }
    .arch-diagram .net-monitoring { background: #3b1f5e; color: #a78bfa; }
    .arch-diagram .net-system { background: #3b3117; color: #fb923c; }
    .arch-diagram .service {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      margin: 4px 8px 4px 24px;
    }
    .arch-diagram .service-name { font-weight: 500; color: var(--text); }
    .arch-diagram .service-desc { color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 0.8rem; }

    /* Feature Grid */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
    }
    .feature-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      transition: border-color 0.2s;
    }
    .feature-card:hover { border-color: var(--accent); }
    .feature-card .icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      margin-bottom: 12px;
    }
    .feature-card .icon.blue { background: rgba(59,130,246,0.15); }
    .feature-card .icon.green { background: rgba(34,197,94,0.15); }
    .feature-card .icon.purple { background: rgba(167,139,250,0.15); }
    .feature-card .icon.orange { background: rgba(251,146,60,0.15); }
    .feature-card .icon.cyan { background: rgba(34,211,238,0.15); }
    .feature-card .icon.red { background: rgba(248,113,113,0.15); }
    .feature-card h3 { margin-bottom: 8px; }
    .feature-card p { color: var(--text-muted); font-size: 0.9rem; }

    /* Network Table */
    .network-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--surface);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--border);
    }
    .network-table th {
      text-align: left;
      padding: 14px 20px;
      background: rgba(255,255,255,0.03);
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      border-bottom: 1px solid var(--border);
    }
    .network-table td {
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
      font-size: 0.9rem;
    }
    .network-table tr:last-child td { border-bottom: none; }
    .network-table code {
      font-family: 'JetBrains Mono', monospace;
      background: rgba(59,130,246,0.1);
      color: var(--accent-light);
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    .type-badge {
      display: inline-block;
      padding: 2px 10px;
      border-radius: 10px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .type-badge.internal { background: rgba(167,139,250,0.15); color: var(--purple); }
    .type-badge.external { background: rgba(34,197,94,0.15); color: var(--green); }

    /* Tech Stack */
    .stack-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
    }
    .stack-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 20px;
    }
    .stack-item .layer {
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-light);
      margin-bottom: 6px;
    }
    .stack-item .techs {
      color: var(--text);
      font-size: 0.9rem;
    }

    /* Code Block */
    .code-block {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      line-height: 1.7;
      overflow-x: auto;
    }
    .code-block .comment { color: var(--text-muted); }
    .code-block .cmd { color: var(--green); }
    .code-block .flag { color: var(--orange); }

    /* Docs Table */
    .docs-list {
      display: grid;
      gap: 12px;
    }
    .doc-item {
      display: flex;
      align-items: center;
      gap: 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 20px;
      transition: border-color 0.2s;
    }
    .doc-item:hover { border-color: var(--accent); }
    .doc-item .doc-icon {
      width: 36px;
      height: 36px;
      background: rgba(59,130,246,0.1);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 1rem;
    }
    .doc-item .doc-name {
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--accent-light);
    }
    .doc-item .doc-desc {
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    /* Quality */
    .quality-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }
    .quality-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 0.85rem;
    }
    .quality-item .check {
      color: var(--green);
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 40px;
      color: var(--text-muted);
      font-size: 0.85rem;
    }
    .footer a {
      color: var(--accent-light);
      text-decoration: none;
    }
    .footer a:hover { text-decoration: underline; }

    /* Commands */
    .cmd-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 10px;
    }
    .cmd-item {
      display: flex;
      align-items: baseline;
      gap: 12px;
      padding: 10px 16px;
      background: var(--surface);
      border-radius: 8px;
      border: 1px solid var(--border);
      font-size: 0.85rem;
    }
    .cmd-item code {
      font-family: 'JetBrains Mono', monospace;
      color: var(--green);
      white-space: nowrap;
      font-size: 0.8rem;
    }
    .cmd-item span { color: var(--text-muted); }

    @media (max-width: 768px) {
      .hero h1 { font-size: 2.2rem; }
      .container { padding: 0 20px; }
      section { padding: 40px 0; }
      .feature-grid, .stack-grid, .cmd-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <!-- Hero -->
  <div class="hero">
    <h1><span>VPAI</span> — Self-Hosted AI Infrastructure</h1>
    <p class="tagline">Deploy a complete AI and automation stack on a single VPS in minutes. Production-ready, secure by default, fully observable.</p>
    <div class="badges">
      <span class="badge"><span class="dot green"></span> 16 Ansible Roles</span>
      <span class="badge"><span class="dot blue"></span> 12+ Docker Services</span>
      <span class="badge"><span class="dot purple"></span> Full CI/CD Pipeline</span>
    </div>
  </div>

  <div class="container">

    <!-- Architecture -->
    <section>
      <h2><span class="number">01</span> Architecture</h2>
      <div class="arch-diagram">
        <div style="text-align:center; margin-bottom: 20px; font-size: 1rem;">
          Internet &nbsp;&#x2500;&#x2500;&#x25B6;&nbsp; <strong style="color: var(--green);">Caddy</strong> (TLS auto, rate limiting, VPN ACL) &nbsp;&#x2500;&#x2500;&#x25B6;&nbsp; Internal Networks
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
          <div>
            <span class="network-label net-backend">Backend Network (isolated)</span><br>
            <div class="service"><span class="service-name">n8n</span> <span class="service-desc">Workflow automation</span></div><br>
            <div class="service"><span class="service-name">OpenClaw</span> <span class="service-desc">AI agent platform</span></div><br>
            <div class="service"><span class="service-name">LiteLLM</span> <span class="service-desc">Multi-LLM proxy</span></div><br>
            <div class="service"><span class="service-name">PostgreSQL</span> <span class="service-desc">Relational database</span></div><br>
            <div class="service"><span class="service-name">Redis</span> <span class="service-desc">Cache &amp; broker</span></div><br>
            <div class="service"><span class="service-name">Qdrant</span> <span class="service-desc">Vector search</span></div>
          </div>
          <div>
            <span class="network-label net-monitoring">Monitoring Network (isolated)</span><br>
            <div class="service"><span class="service-name">VictoriaMetrics</span> <span class="service-desc">Time-series metrics</span></div><br>
            <div class="service"><span class="service-name">Loki</span> <span class="service-desc">Log aggregation</span></div><br>
            <div class="service"><span class="service-name">Alloy</span> <span class="service-desc">Metrics &amp; logs collector</span></div><br>
            <div class="service"><span class="service-name">Grafana</span> <span class="service-desc">Dashboards &amp; alerting</span></div><br>
            <br>
            <span class="network-label net-system">System Services</span><br>
            <div class="service"><span class="service-name">DIUN</span> <span class="service-desc">Image update notifier</span></div><br>
            <div class="service"><span class="service-name">CrowdSec</span> <span class="service-desc">Intrusion prevention</span></div><br>
            <div class="service"><span class="service-name">Fail2ban</span> <span class="service-desc">Brute-force protection</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section>
      <h2><span class="number">02</span> Key Features</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="icon blue">&#x2699;</div>
          <h3>Infrastructure as Code</h3>
          <p>16 Ansible roles, fully idempotent. Every value is a Jinja2 variable — redeploy under any name in minutes.</p>
        </div>
        <div class="feature-card">
          <div class="icon green">&#x1F512;</div>
          <h3>Secure by Default</h3>
          <p>VPN-only admin access, automatic TLS, CrowdSec + Fail2ban, UFW hardening. Only ports 80 and 443 are public.</p>
        </div>
        <div class="feature-card">
          <div class="icon purple">&#x1F4CA;</div>
          <h3>Full Observability</h3>
          <p>5 Grafana dashboards, alerting rules (CPU, RAM, disk, container restarts), centralized logs via Loki.</p>
        </div>
        <div class="feature-card">
          <div class="icon orange">&#x1F4BE;</div>
          <h3>Automated Backups</h3>
          <p>Pre-backup scripts for PostgreSQL, Redis, Qdrant, n8n. S3-compatible storage. Disaster recovery playbooks.</p>
        </div>
        <div class="feature-card">
          <div class="icon cyan">&#x1F680;</div>
          <h3>CI/CD Pipeline</h3>
          <p>GitHub Actions: lint + Molecule tests on push, deploy to pre-prod on Hetzner, manual prod deploy.</p>
        </div>
        <div class="feature-card">
          <div class="icon red">&#x1F504;</div>
          <h3>Molecule-Tested</h3>
          <p>Every role has converge + verify tests. ansible-lint passes at profile "production" with zero warnings.</p>
        </div>
      </div>
    </section>

    <!-- Network Architecture -->
    <section>
      <h2><span class="number">03</span> Network Segmentation</h2>
      <p style="color: var(--text-muted); margin-bottom: 20px;">Four isolated Docker networks for defense in depth. No service has more access than it needs.</p>
      <table class="network-table">
        <thead>
          <tr><th>Network</th><th>Type</th><th>Purpose</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><code>frontend</code></td>
            <td><span class="type-badge external">External</span></td>
            <td>Caddy &#x2194; Grafana (public-facing services)</td>
          </tr>
          <tr>
            <td><code>backend</code></td>
            <td><span class="type-badge internal">Internal</span></td>
            <td>App &#x2194; Database communication (no internet access)</td>
          </tr>
          <tr>
            <td><code>monitoring</code></td>
            <td><span class="type-badge internal">Internal</span></td>
            <td>Metrics and logs collection pipeline</td>
          </tr>
          <tr>
            <td><code>egress</code></td>
            <td><span class="type-badge external">External</span></td>
            <td>Outbound API calls (OpenAI, Anthropic, webhooks)</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Tech Stack -->
    <section>
      <h2><span class="number">04</span> Technology Stack</h2>
      <div class="stack-grid">
        <div class="stack-item">
          <div class="layer">Orchestration</div>
          <div class="techs">Ansible 2.16+, Docker Compose V2</div>
        </div>
        <div class="stack-item">
          <div class="layer">Reverse Proxy</div>
          <div class="techs">Caddy (auto TLS, rate limiting, VPN ACL)</div>
        </div>
        <div class="stack-item">
          <div class="layer">Applications</div>
          <div class="techs">n8n, OpenClaw, LiteLLM</div>
        </div>
        <div class="stack-item">
          <div class="layer">Databases</div>
          <div class="techs">PostgreSQL 18.1, Redis 8.0, Qdrant 1.16</div>
        </div>
        <div class="stack-item">
          <div class="layer">Observability</div>
          <div class="techs">Grafana, VictoriaMetrics, Loki, Alloy</div>
        </div>
        <div class="stack-item">
          <div class="layer">Security</div>
          <div class="techs">CrowdSec, Fail2ban, UFW, Headscale VPN</div>
        </div>
        <div class="stack-item">
          <div class="layer">CI/CD</div>
          <div class="techs">GitHub Actions, Hetzner Cloud</div>
        </div>
        <div class="stack-item">
          <div class="layer">Backup</div>
          <div class="techs">Zerobyte, Hetzner S3, Uptime Kuma</div>
        </div>
      </div>
    </section>

    <!-- Commands -->
    <section>
      <h2><span class="number">05</span> Available Commands</h2>
      <div class="cmd-grid">
        <div class="cmd-item"><code>make lint</code> <span>yamllint + ansible-lint</span></div>
        <div class="cmd-item"><code>make test</code> <span>Molecule tests (all 16 roles)</span></div>
        <div class="cmd-item"><code>make test-role ROLE=n8n</code> <span>Test specific role</span></div>
        <div class="cmd-item"><code>make check</code> <span>Dry-run (--check --diff)</span></div>
        <div class="cmd-item"><code>make deploy-preprod</code> <span>Deploy to pre-production</span></div>
        <div class="cmd-item"><code>make deploy-prod</code> <span>Deploy to production</span></div>
        <div class="cmd-item"><code>make smoke-test URL=...</code> <span>Smoke tests on live</span></div>
        <div class="cmd-item"><code>make vault-edit</code> <span>Edit encrypted secrets</span></div>
        <div class="cmd-item"><code>make rollback</code> <span>Emergency rollback</span></div>
        <div class="cmd-item"><code>make backup-restore</code> <span>Restore from S3</span></div>
      </div>
    </section>

    <!-- Quick Start -->
    <section>
      <h2><span class="number">06</span> Quick Start</h2>
      <div class="code-block">
        <span class="comment"># Clone the repository</span><br>
        <span class="cmd">git clone</span> https://github.com/Mobutoo/VPAI.git<br>
        <span class="cmd">cd</span> VPAI<br>
        <br>
        <span class="comment"># Install dependencies</span><br>
        <span class="cmd">chmod</span> +x bootstrap.sh <span class="flag">&amp;&amp;</span> <span class="cmd">./bootstrap.sh</span><br>
        <br>
        <span class="comment"># Configure your deployment</span><br>
        <span class="cmd">cp</span> PRD.md.example PRD.md<br>
        <span class="comment"># Edit PRD.md with your domain, IPs, project name...</span><br>
        <br>
        <span class="comment"># Create Ansible Vault with your secrets</span><br>
        <span class="cmd">make</span> vault-init<br>
        <br>
        <span class="comment"># Deploy</span><br>
        <span class="cmd">make</span> deploy-preprod &nbsp;&nbsp;&nbsp;<span class="comment"># Pre-production first</span><br>
        <span class="cmd">make</span> smoke-test <span class="flag">URL=</span>https://your-domain.com<br>
        <span class="cmd">make</span> deploy-prod &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment"># Production when ready</span>
      </div>
    </section>

    <!-- Documentation -->
    <section>
      <h2><span class="number">07</span> Documentation</h2>
      <div class="docs-list">
        <div class="doc-item">
          <div class="doc-icon">&#x1F4DD;</div>
          <div>
            <div class="doc-name">PRD.md.example</div>
            <div class="doc-desc">Configuration template &mdash; copy and fill with your values</div>
          </div>
        </div>
        <div class="doc-item">
          <div class="doc-icon">&#x1F3D7;</div>
          <div>
            <div class="doc-name">TECHNICAL-SPEC.md</div>
            <div class="doc-desc">Architecture, configs, Docker networks, resource limits</div>
          </div>
        </div>
        <div class="doc-item">
          <div class="doc-icon">&#x1F4D6;</div>
          <div>
            <div class="doc-name">docs/RUNBOOK.md</div>
            <div class="doc-desc">Day-to-day operations, troubleshooting, procedures</div>
          </div>
        </div>
        <div class="doc-item">
          <div class="doc-icon">&#x1F5FA;</div>
          <div>
            <div class="doc-name">docs/ARCHITECTURE.md</div>
            <div class="doc-desc">Mermaid diagrams: networks, data flow, startup order</div>
          </div>
        </div>
        <div class="doc-item">
          <div class="doc-icon">&#x1F6E1;</div>
          <div>
            <div class="doc-name">docs/DISASTER-RECOVERY.md</div>
            <div class="doc-desc">Recovery scenarios: crash, VPS loss, DB corruption, breach</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quality -->
    <section>
      <h2><span class="number">08</span> Quality Standards</h2>
      <div class="quality-grid">
        <div class="quality-item"><span class="check">&#x2713;</span> ansible-lint production &mdash; 0 failures</div>
        <div class="quality-item"><span class="check">&#x2713;</span> yamllint strict mode</div>
        <div class="quality-item"><span class="check">&#x2713;</span> 16 Molecule test suites</div>
        <div class="quality-item"><span class="check">&#x2713;</span> All images version-pinned</div>
        <div class="quality-item"><span class="check">&#x2713;</span> Secrets encrypted (Vault)</div>
        <div class="quality-item"><span class="check">&#x2713;</span> Zero hardcoded values</div>
      </div>
    </section>

  </div>

  <!-- Footer -->
  <div class="footer">
    <p style="margin-bottom: 8px;">
      <strong>VPAI</strong> &mdash; Self-Hosted AI Infrastructure
    </p>
    <p>
      Built with Ansible, Docker, and <a href="https://claude.ai/claude-code">Claude Code</a>.
    </p>
    <p style="margin-top: 12px; font-size: 0.75rem;">
      MIT License &bull; <a href="https://github.com/Mobutoo/VPAI">github.com/Mobutoo/VPAI</a>
    </p>
  </div>

</body>
</html>
