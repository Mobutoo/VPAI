---
# n8n — handlers

- name: Restart n8n stack
  community.docker.docker_compose_v2:
    project_src: "/opt/{{ project_name }}"
    files:
      - docker-compose.yml
    services:
      - n8n
    state: present
    # REX: recreate: always requis — state: restarted ne relit pas l'env_file.
    # Voir TROUBLESHOOTING.md section 11.18 + roles/nocodb/handlers/main.yml.
    recreate: always
  become: true
  failed_when: false  # Ne pas échouer si docker-compose.yml n'existe pas encore
