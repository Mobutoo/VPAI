---
name: idea-planning
description: Universal idea lifecycle ‚Äî qualification, co-construction multi-agents, versioning Kaneo, approbation Telegram.
metadata: { "openclaw": { "emoji": "üí°" } }
---

# Skill : Idea Planning ‚Äî Bo√Æte √† Id√©es

Cycle de vie universel d'une id√©e : de l'intention au projet dispach√©.
Fonctionne pour TOUT type de projet : tech, business, perso, physique, finance.

## Seuil de qualification ‚Äî Avant toute g√©n√©ration

Patterns d√©clencheurs (d√©tecter dans le message) :
- "j'ai une id√©e", "on devrait faire", "imagine qu'on cr√©e", "est-ce faisable de"
- "que penses-tu de cr√©er", "j'envisage de", "si on lan√ßait", "et si on faisait"

‚Üí **Ne pas g√©n√©rer automatiquement.** Demander d'abord :
> "Je d√©tecte une id√©e de projet : <reformulation en 1 phrase>. Veux-tu un plan strat√©gique complet ?"

Sur confirmation ‚Üí lancer la co-construction.
Sur refus ‚Üí traiter comme une question normale.

---

## Co-construction multi-agents (parall√®le, max 4)

Lancer simultan√©ment :

```
sessions_spawn(explorer, "Contexte pour id√©e : <titre>. Recherche : alternatives existantes, √©tat du march√©, concurrents directs, retours d'exp√©rience similaires. Retourne JSON {context: string, alternatives: [string], market_state: string, key_risks: [string]}")

sessions_spawn(cfo, "Estimation financi√®re pour id√©e : <titre> dans notre contexte. Estime : budget initial, co√ªts r√©currents mensuels, ROI estim√©, d√©lai de retour sur investissement. Retourne JSON {budget_initial: string, monthly_costs: string, roi_timeline: string, risks_financial: [string]}")

sessions_spawn(builder, "√âvaluation faisabilit√© pour id√©e : <titre>. Estime : stack technique n√©cessaire, effort en semaines, d√©pendances critiques, risques techniques. Si non-tech : √©valuer ressources humaines/mat√©rielles. Retourne JSON {tech_stack: [string], estimated_effort: string, dependencies: [string], technical_risks: [string]}")
```

Pendant ce temps, le Concierge pr√©pare :
- SWOT (forces/faiblesses/opportunit√©s/menaces)
- RACI (responsible/accountable/consulted/informed)
- implementation_steps (liste ordonn√©e d'√©tapes concr√®tes)
- challenger (alternative ou approche concurrente)
- kpi_victoire (m√©triques de succ√®s mesurables)

Merger les 4 contributions ‚Üí plan JSON unifi√©.

---

## Structure JSON du plan (agnostique au domaine)

```json
{
  "title": "Nom court du projet (5 mots max)",
  "domain": "tech|business|perso|physique|finance|autre",
  "summary": "Description 2-3 phrases ‚Äî contexte + objectif + valeur ajout√©e",
  "swot": {
    "strengths": ["Point fort 1", "Point fort 2"],
    "weaknesses": ["Faiblesse 1"],
    "opportunities": ["Opportunit√© 1"],
    "threats": ["Menace 1"]
  },
  "raci": {
    "responsible": ["builder (si tech) | cfo (si finance) | user (si perso/physique)"],
    "accountable": "concierge|user",
    "consulted": ["explorer", "cfo"],
    "informed": ["maintainer (si impact infra)"]
  },
  "risks": [
    {
      "risk": "Description du risque",
      "probability": "high|medium|low",
      "impact": "critical|major|minor",
      "mitigation": "Action corrective"
    }
  ],
  "resources": {
    "tech_stack": ["Service1", "Outil2"],
    "tools": ["Outil physique ou service tiers (pour projets non-tech)"],
    "budget_estimated": "X‚Ç¨ initial + Y‚Ç¨/mois",
    "timeline": "X semaines | X mois"
  },
  "challenger": "Alternative ou approche concurrente existante ‚Äî pourquoi ce plan est meilleur",
  "kpi_victoire": [
    "KPI mesurable 1 ‚Äî ex: 100 clients en 3 mois",
    "KPI mesurable 2 ‚Äî ex: ROI positif √† 6 mois"
  ],
  "implementation_steps": [
    "√âtape 1 : action concr√®te assignable",
    "√âtape 2 : action concr√®te assignable",
    "√âtape 3 : action concr√®te assignable"
  ]
}
```

### R√®gles domain-specific

| Domain | tech_stack | tools | Responsible RACI |
|--------|------------|-------|-----------------|
| `tech` | Services Docker, langages, frameworks | vide | `builder` |
| `business` | Outils SaaS, CRM, site web | Outils physiques/commerciaux | `user` + `cfo` |
| `finance` | Broker, plateforme d'investissement | vide | `cfo` |
| `physique` | Minimal ou vide | Mat√©riaux, √©quipements, fournisseurs | `user` |
| `perso` | Minimal ou vide | Applications, services | `user` |
| `autre` | Selon contexte | Selon contexte | `user` |

---

## Format de pr√©sentation Telegram

```
üí° <titre> [<domain>]
üìã <summary>

‚ö° Effort : <estimated_effort> | üí∞ Budget : <budget_estimated>
üéØ KPIs : <kpi_victoire[0]>

‚úÖ Atouts : <strengths[0]>, <strengths[1]>
‚ö†Ô∏è  Risque principal : <risks[0].risk> (probabilit√© : <risks[0].probability>)
üîó Plan complet : <lien Kaneo task>
```

### Streaming progressif (V3 ‚Äî OpenClaw v2026.2.22)

**√âtape 0 ‚Äî Message placeholder** (avant de lancer les agents) :
```
sessions_spawn(messenger, "telegram_send_placeholder msg=‚è≥ Analyse en cours...")
```
‚Üí Stocker le message_id retourn√©.

**√âtape 1 ‚Äî Spawn parall√®le** (inchang√© ‚Äî Explorer, CFO, Builder simultan√©ment)

**√âtape 2 ‚Äî Mise √† jour progressive au retour de chaque agent** :
```
# Retour Explorer :
sessions_spawn(messenger, "telegram_edit message_id=<mid> text=‚è≥ Analyse en cours...\n‚úÖ Contexte march√© analys√©")
# Retour CFO :
sessions_spawn(messenger, "telegram_edit message_id=<mid> text=‚è≥ Analyse en cours...\n‚úÖ Contexte march√© analys√©\n‚úÖ Budget : <montant>")
# Retour Builder :
sessions_spawn(messenger, "telegram_edit message_id=<mid> text=‚è≥ Analyse en cours...\n‚úÖ Contexte march√© analys√©\n‚úÖ Budget estim√©\n‚úÖ Faisabilit√© √©valu√©e")
```

**√âtape 3 ‚Äî Message final avec plan + boutons** :
```
sessions_spawn(messenger, "create_idea_plan title=<titre> domain=<domain> plan_json_b64=<base64_du_plan_JSON>")
```
‚Üí R√©cup√©rer task_id retourn√© par Messenger
‚Üí √âditer le message placeholder avec le r√©sum√© final + boutons inline :
```
sessions_spawn(messenger, "telegram_edit message_id=<mid> text=<plan_resume> reply_markup_b64=<base64_keyboard>")
```
Boutons inline :
  [‚úÖ Approuver] callback_data=approve:<task_id>
  [‚úèÔ∏è Modifier]  callback_data=modify:<task_id>
  [‚ùå Refuser]   callback_data=reject:<task_id>

**Aussi ‚Äî indexer en m√©moire** :
```
sessions_spawn(messenger, "update_ideas_memory task_id=<id> title=<titre> domain=<domain> status=In Review summary=<summary>")
```

---

## Gestion des it√©rations

### Sur callback "modify:<task_id>"
1. Demander √† l'utilisateur : "Qu'est-ce que tu veux modifier ? (garde le reste)"
2. Sur r√©ponse : relancer co-construction avec feedback int√©gr√© dans le prompt
   ‚Üí Exemple prompt Explorer : "Contexte pour id√©e : <titre>. Feedback utilisateur : <feedback>. Pr√©c√©dent contexte : <context_v1>. Affine tes recherches en tenant compte du feedback."
3. Merger ‚Üí plan vN
4. `sessions_spawn(messenger, "update_idea task_id=<id> version=<N> feedback=<texte_url_encoded> plan_json_b64=<base64>")`
5. Renvoyer r√©sum√© + boutons

### Sur callback "approve:<task_id>"
1. `sessions_spawn(messenger, "approve_idea task_id=<id>")`
2. Confirmer √† l'utilisateur : "‚úÖ Plan approuv√© ! Le projet sera cr√©√© dans Kaneo avec les t√¢ches assign√©es."

### Sur callback "reject:<task_id>"
1. `sessions_spawn(messenger, "reject_idea task_id=<id> reason=Refus utilisateur")`
2. Confirmer : "‚ùå Id√©e archiv√©e dans Kaneo."

---

## R√®gles de versioning dans Kaneo

- Max 3 versions actives dans la description Kaneo
- Au-del√† : le Messenger archive les plus anciennes dans un `add_comment`
- Format des d√©limiteurs (regex-safe) :

```
---IDEA-PLAN-META-START---
{"id":"idea-<YYYY-MM-DD>-<NNN>","domain":"<domain>","status":"pending","iterations":<N>,"created":"<YYYY-MM-DD>"}
---IDEA-PLAN-META-END---

---IDEA-PLAN-V1-START---
{...plan JSON complet...}
---IDEA-PLAN-V1-END---

---IDEA-FEEDBACK-V1-START---
{"from":"user","date":"<ISO8601>","comment":"<feedback>","type":"modify"}
---IDEA-FEEDBACK-V1-END---

---IDEA-PLAN-V2-START---
{...plan r√©vis√©...}
---IDEA-PLAN-V2-END---
```

---

## R√®gle absolue

**JAMAIS** cr√©er de projet r√©el, de t√¢ches Kaneo ou assigner des ressources AVANT l'approbation explicite via bouton [‚úÖ Approuver].

La co-construction = g√©n√©ration d'un plan. Pas d'ex√©cution.
