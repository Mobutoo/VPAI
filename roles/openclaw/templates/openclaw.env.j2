# {{ ansible_managed }}
# OpenClaw Gateway environment
# Architecture: OpenClaw -> LiteLLM -> (Anthropic, OpenAI, OpenRouter)
# OpenClaw does NOT call AI providers directly — all routing via LiteLLM

# Gateway authentication token
OPENCLAW_GATEWAY_TOKEN={{ openclaw_gateway_token }}

# Config and state paths (inside container, mapped to host volumes)
OPENCLAW_STATE_DIR=/home/node/.openclaw
OPENCLAW_CONFIG_PATH=/home/node/.openclaw/openclaw.json
HOME=/home/node

# LiteLLM proxy key (used by models.providers in openclaw.json)
LITELLM_API_KEY={{ litellm_master_key }}

# Telegram Bot (dedicated OpenClaw channel)
{% if telegram_openclaw_bot_token | default('') | length > 0 %}
TELEGRAM_BOT_TOKEN={{ telegram_openclaw_bot_token }}
{% endif %}

# n8n integration (webhook delegation)
{% if openclaw_n8n_integration | default(false) %}
N8N_WEBHOOK_SECRET={{ n8n_webhook_secret }}
N8N_WEBHOOK_BASE_URL={{ n8n_webhook_base_url }}
{% endif %}

# Boîte à Idées — webhook plan-dispatch (appelé par approve_idea dans le sandbox Messenger)
KANEO_PLAN_DISPATCH_WEBHOOK=http://n8n:5678/webhook/plan-dispatch

# Qdrant (RAG content search via skill)
QDRANT_API_KEY={{ qdrant_api_key }}
QDRANT_RAG_COLLECTION={{ qdrant_rag_collection }}

# Brave Search API (web_search tool for explorer agent)
{% if brave_search_api_key | default('') | length > 0 %}
BRAVE_API_KEY={{ brave_search_api_key }}
{% endif %}

# Node.js memory — prevent OOM crash (default heap limit is ~512MB)
NODE_OPTIONS=--max-old-space-size={{ openclaw_node_heap_mb | default(768) }}

# Timezone
TZ={{ timezone }}
