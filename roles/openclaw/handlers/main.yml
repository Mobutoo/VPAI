---
# openclaw — handlers

- name: Restart openclaw stack
  community.docker.docker_compose_v2:
    project_src: "/opt/{{ project_name }}"
    files:
      - docker-compose.yml
    services:
      - openclaw
    state: present
    recreate: always
  become: true
  # NOTE: state: present + recreate: always force la recreation du container.
  # Requis pour prendre en compte les changements d'env_file (OPENAI_API_KEY, etc.).
  # state: restarted ne relit PAS l'env_file (docker compose restart = même env).
