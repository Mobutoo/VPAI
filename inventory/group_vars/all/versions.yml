---
# inventory/group_vars/all/versions.yml — Images Docker pinnées
# JAMAIS de :latest ou :stable — Tout est versionné
# Vérifié le : 11 février 2026

# --- Données ---
postgresql_image: "postgres:18.1-bookworm"
redis_image: "redis:8.0-bookworm"  # 8.0.10 n'existe pas, utiliser 8.0
qdrant_image: "qdrant/qdrant:v1.16.3"

# --- Applications ---
openclaw_image: "ghcr.io/openclaw/openclaw:2026.2.22"
n8n_image: "docker.n8n.io/n8nio/n8n:2.7.3"
litellm_image: "ghcr.io/berriai/litellm:v1.81.3-stable"

# --- Reverse Proxy ---
caddy_image: "caddy:2.10.2-alpine"

# --- Observabilité ---
grafana_image: "grafana/grafana:12.3.2"
victoriametrics_image: "victoriametrics/victoria-metrics:v1.135.0"
loki_image: "grafana/loki:3.6.5"
alloy_image: "grafana/alloy:v1.13.0"

# --- Monitoring (collecteurs) ---
cadvisor_image: "ghcr.io/google/cadvisor:0.55.1"

# --- Système ---
diun_image: "crazymax/diun:4.31.0"

# --- Tunnel / VPN-only ---
# cloudflared: RETIRÉ — remplacé par webhook relay via Seko-VPN (role webhook-relay)
# Les webhooks Meta passent maintenant par hook.<domain> (Seko-VPN) -> VPN mesh -> VPS
# cloudflared_image: "cloudflare/cloudflared:2025.1.0"

# --- Kaneo (PM tool — Mobutoo/kaneo fork) ---
# Built by CI in Mobutoo/kaneo fork — ci-build.yml workflow
# Images: ghcr.io/mobutoo/api:<sha> + ghcr.io/mobutoo/web:<sha>
# Pinned to sha-dfc2451 (2026-02-22) — upstream usekaneo/kaneo@2.2.1 + CI setup
# TODO: Switch to custom fork images after OpenClaw integration modifications are merged
kaneo_api_image: "ghcr.io/mobutoo/api:sha-dfc2451"
kaneo_web_image: "ghcr.io/mobutoo/web:sha-dfc2451"

# --- Sure (personal finance — Maybe Finance fork) ---
# Multi-arch: amd64 + arm64 confirmé sur GHCR
# TODO: Pinner sur SHA digest après premier deploy validé
sure_image: "ghcr.io/we-promise/sure:nightly"

# --- Workstation Pi (natif — pas Docker) ---
# Caddy : binaire custom build via xcaddy (module dns.providers.ovh)
# Version alignee avec le prod Docker (caddy_image ci-dessus)
workstation_caddy_image: "caddy:2.10.2-alpine"  # reference version prod
# OpenCode : pinne apres premier deploy valide
# opencode_npm_version dans roles/opencode/defaults/main.yml
opencode_npm_version_pinned: "1.2.8"  # version installee — a jour 2026-02-20

# Claude Code CLI : pinne apres premier deploy valide
# claude_code_npm_version dans roles/claude-code/defaults/main.yml
claude_code_npm_version_pinned: "2.1.50"  # pinned 2026-02-22
